{"version":3,"file":"customAgTypeListener.js","names":["CustomAgTypeListener","AgtypeListener","rootObject","objectInsider","prevObject","lastObject","lastValue","mergeArrayOrObject","key","Array","mergeArray","mergeObject","push","shift","createNewObject","newObject","unshift","createNewArray","pushIfArray","value","exitStringValue","ctx","stripQuotes","getText","exitIntegerValue","parseInt","exitFloatValue","parseFloat","exitTrueBoolean","_ctx","exitFalseBoolean","exitNullValue","exitFloatLiteral","enterObjectValue","enterArrayValue","exitObjectValue","exitPair","name","STRING","undefined","exitAgType","quotesString","JSON","parse","getResult"],"sources":["../../src/tools/customAgTypeListener.ts"],"sourcesContent":["/**\n * File: /src/tools/customAgTypeListener.ts\n * Project: apache-age-client\n * File Created: 13-09-2022 04:45:20\n * Author: Apache Software Foundation\n * -----\n * Last Modified: 13-09-2022 07:01:22\n * Modified By: Clay Risser\n * -----\n * Risser Labs LLC (c) Copyright 2022\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport AgtypeListener from \"./AgtypeListener\";\n\nexport class CustomAgTypeListener extends AgtypeListener {\n  rootObject: any = null;\n  objectInsider: any[] = [];\n  prevObject: any = null;\n  lastObject: any = null;\n  lastValue: any = null;\n\n  mergeArrayOrObject(key: any) {\n    if (this.prevObject instanceof Array) {\n      this.mergeArray();\n    } else {\n      this.mergeObject(key);\n    }\n  }\n\n  mergeArray() {\n    this.prevObject.push(this.lastObject);\n    this.lastObject = this.prevObject;\n    this.objectInsider.shift();\n    this.prevObject = this.objectInsider[1];\n  }\n\n  mergeObject(key: any) {\n    this.prevObject[key] = this.lastObject;\n    this.lastObject = this.prevObject;\n    this.objectInsider.shift();\n    this.prevObject = this.objectInsider[1];\n  }\n\n  createNewObject() {\n    const newObject = {};\n    this.objectInsider.unshift(newObject);\n    this.prevObject = this.lastObject;\n    this.lastObject = newObject;\n  }\n\n  createNewArray() {\n    const newObject: any[] = [];\n    this.objectInsider.unshift(newObject);\n    this.prevObject = this.lastObject;\n    this.lastObject = newObject;\n  }\n\n  pushIfArray(value: any) {\n    if (this.lastObject instanceof Array) {\n      this.lastObject.push(value);\n      return true;\n    }\n    return false;\n  }\n\n  exitStringValue(ctx: any) {\n    const value = this.stripQuotes(ctx.getText());\n    if (!this.pushIfArray(value)) {\n      this.lastValue = value;\n    }\n  }\n\n  exitIntegerValue(ctx: any) {\n    const value = parseInt(ctx.getText());\n    if (!this.pushIfArray(value)) {\n      this.lastValue = value;\n    }\n  }\n\n  exitFloatValue(ctx: any) {\n    const value = parseFloat(ctx.getText());\n    if (!this.pushIfArray(value)) {\n      this.lastValue = value;\n    }\n  }\n\n  exitTrueBoolean(_ctx: any) {\n    const value = true;\n    if (!this.pushIfArray(value)) {\n      this.lastValue = value;\n    }\n  }\n\n  exitFalseBoolean(_ctx: any) {\n    const value = false;\n    if (!this.pushIfArray(value)) {\n      this.lastValue = value;\n    }\n  }\n\n  exitNullValue(_ctx: any) {\n    const value = null;\n    if (!this.pushIfArray(value)) {\n      this.lastValue = value;\n    }\n  }\n\n  exitFloatLiteral(ctx: any) {\n    const value = ctx.getText();\n    if (!this.pushIfArray(value)) {\n      this.lastValue = value;\n    }\n  }\n\n  enterObjectValue(_ctx: any) {\n    this.createNewObject();\n  }\n\n  enterArrayValue(_ctx: any) {\n    this.createNewArray();\n  }\n\n  exitObjectValue(_ctx: any) {\n    if (this.prevObject instanceof Array) {\n      this.mergeArray();\n    }\n  }\n\n  exitPair(ctx: any) {\n    const name = this.stripQuotes(ctx.STRING().getText());\n\n    if (this.lastValue !== undefined) {\n      this.lastObject[name] = this.lastValue;\n      this.lastValue = undefined;\n    } else {\n      this.mergeArrayOrObject(name);\n    }\n  }\n\n  exitAgType(_ctx: any) {\n    this.rootObject = this.objectInsider.shift();\n  }\n\n  stripQuotes(quotesString: string) {\n    return JSON.parse(quotesString);\n  }\n\n  getResult() {\n    return this.rootObject || this.lastValue;\n  }\n}\n"],"mappings":"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"}