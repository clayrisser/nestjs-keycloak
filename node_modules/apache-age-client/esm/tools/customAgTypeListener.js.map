{"version":3,"file":"customAgTypeListener.js","names":["AgtypeListener","CustomAgTypeListener","rootObject","objectInsider","prevObject","lastObject","lastValue","mergeArrayOrObject","key","Array","mergeArray","mergeObject","push","shift","createNewObject","newObject","unshift","createNewArray","pushIfArray","value","exitStringValue","ctx","stripQuotes","getText","exitIntegerValue","parseInt","exitFloatValue","parseFloat","exitTrueBoolean","_ctx","exitFalseBoolean","exitNullValue","exitFloatLiteral","enterObjectValue","enterArrayValue","exitObjectValue","exitPair","name","STRING","undefined","exitAgType","quotesString","JSON","parse","getResult"],"sources":["../../src/tools/customAgTypeListener.ts"],"sourcesContent":["/**\n * File: /src/tools/customAgTypeListener.ts\n * Project: apache-age-client\n * File Created: 13-09-2022 04:45:20\n * Author: Apache Software Foundation\n * -----\n * Last Modified: 13-09-2022 07:01:22\n * Modified By: Clay Risser\n * -----\n * Risser Labs LLC (c) Copyright 2022\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport AgtypeListener from \"./AgtypeListener\";\n\nexport class CustomAgTypeListener extends AgtypeListener {\n  rootObject: any = null;\n  objectInsider: any[] = [];\n  prevObject: any = null;\n  lastObject: any = null;\n  lastValue: any = null;\n\n  mergeArrayOrObject(key: any) {\n    if (this.prevObject instanceof Array) {\n      this.mergeArray();\n    } else {\n      this.mergeObject(key);\n    }\n  }\n\n  mergeArray() {\n    this.prevObject.push(this.lastObject);\n    this.lastObject = this.prevObject;\n    this.objectInsider.shift();\n    this.prevObject = this.objectInsider[1];\n  }\n\n  mergeObject(key: any) {\n    this.prevObject[key] = this.lastObject;\n    this.lastObject = this.prevObject;\n    this.objectInsider.shift();\n    this.prevObject = this.objectInsider[1];\n  }\n\n  createNewObject() {\n    const newObject = {};\n    this.objectInsider.unshift(newObject);\n    this.prevObject = this.lastObject;\n    this.lastObject = newObject;\n  }\n\n  createNewArray() {\n    const newObject: any[] = [];\n    this.objectInsider.unshift(newObject);\n    this.prevObject = this.lastObject;\n    this.lastObject = newObject;\n  }\n\n  pushIfArray(value: any) {\n    if (this.lastObject instanceof Array) {\n      this.lastObject.push(value);\n      return true;\n    }\n    return false;\n  }\n\n  exitStringValue(ctx: any) {\n    const value = this.stripQuotes(ctx.getText());\n    if (!this.pushIfArray(value)) {\n      this.lastValue = value;\n    }\n  }\n\n  exitIntegerValue(ctx: any) {\n    const value = parseInt(ctx.getText());\n    if (!this.pushIfArray(value)) {\n      this.lastValue = value;\n    }\n  }\n\n  exitFloatValue(ctx: any) {\n    const value = parseFloat(ctx.getText());\n    if (!this.pushIfArray(value)) {\n      this.lastValue = value;\n    }\n  }\n\n  exitTrueBoolean(_ctx: any) {\n    const value = true;\n    if (!this.pushIfArray(value)) {\n      this.lastValue = value;\n    }\n  }\n\n  exitFalseBoolean(_ctx: any) {\n    const value = false;\n    if (!this.pushIfArray(value)) {\n      this.lastValue = value;\n    }\n  }\n\n  exitNullValue(_ctx: any) {\n    const value = null;\n    if (!this.pushIfArray(value)) {\n      this.lastValue = value;\n    }\n  }\n\n  exitFloatLiteral(ctx: any) {\n    const value = ctx.getText();\n    if (!this.pushIfArray(value)) {\n      this.lastValue = value;\n    }\n  }\n\n  enterObjectValue(_ctx: any) {\n    this.createNewObject();\n  }\n\n  enterArrayValue(_ctx: any) {\n    this.createNewArray();\n  }\n\n  exitObjectValue(_ctx: any) {\n    if (this.prevObject instanceof Array) {\n      this.mergeArray();\n    }\n  }\n\n  exitPair(ctx: any) {\n    const name = this.stripQuotes(ctx.STRING().getText());\n\n    if (this.lastValue !== undefined) {\n      this.lastObject[name] = this.lastValue;\n      this.lastValue = undefined;\n    } else {\n      this.mergeArrayOrObject(name);\n    }\n  }\n\n  exitAgType(_ctx: any) {\n    this.rootObject = this.objectInsider.shift();\n  }\n\n  stripQuotes(quotesString: string) {\n    return JSON.parse(quotesString);\n  }\n\n  getResult() {\n    return this.rootObject || this.lastValue;\n  }\n}\n"],"mappings":"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"}